<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=en dir=ltr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Lalit Maganti</title><meta name=theme-color><meta name=description content="A personal blog"><meta name=author content="Lalit Maganti"><link rel="preload stylesheet" as=style href=/main.min.css><style>article{font-size:.9375rem!important;line-height:1.6!important}article header h1,article>header>h1,article>h1{font-size:1rem!important;line-height:1.6!important;font-weight:700!important}article h1 a{font-weight:700!important}main.prose>*:first-child,main.prose>*:first-child>*:first-child{margin-top:0!important}main{padding-top:1rem!important}</style><link rel=preload as=image href=/theme.png><link rel=preload as=image href=/github.svg><link rel=preload as=image href=/linkedin.svg><link rel=preload as=image href=/rss.svg><link rel=icon href=/favicon.ico><link rel=apple-touch-icon href=/apple-touch-icon.png><meta name=generator content="Hugo 0.151.2"><script async src="https://www.googletagmanager.com/gtag/js?id=G-CPF1NN7N28"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CPF1NN7N28")}</script><meta itemprop=name content="Lalit Maganti"><meta itemprop=datePublished content="2025-10-17T15:00:00+01:00"><meta itemprop=dateModified content="2025-10-17T15:00:00+01:00"><meta property="og:url" content="/"><meta property="og:site_name" content="Lalit Maganti"><meta property="og:title" content="Lalit Maganti"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lalit Maganti"><link rel=alternate type=application/rss+xml href=/index.xml title="Lalit Maganti"><link rel=canonical href=/></head><body class="bg-(--bg) text-black antialiased duration-200 ease-out [-webkit-tap-highlight-color:transparent] dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-(--w) px-8 whitespace-nowrap lg:justify-center"><div class="relative z-50 flex items-center ltr:mr-auto rtl:ml-auto"><a class="-translate-y-[1px] text-2xl font-medium" href=/>Lalit Maganti</a><div class="btn-dark text-[0px] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden ltr:-mr-8 rtl:-ml-8" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full flex-col justify-center bg-(--bg) pb-16 duration-200 select-none lg:static lg:h-auto lg:flex-row lg:bg-transparent! lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse"><a class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal" href=/page/about/>About</a></nav><nav class="mt-12 flex justify-center space-x-10 lg:mt-0 lg:items-center ltr:lg:ml-14 rtl:space-x-reverse rtl:lg:mr-14 dark:invert"><a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/LalitMaganti target=_blank rel=me>github</a>
<a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./linkedin.svg) href=https://linkedin.com/in/lalit-maganti-18b73a9a target=_blank rel=me>linkedin</a>
<a class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral dark:prose-invert relative mx-auto min-h-[calc(100vh-9rem)] max-w-(--w) px-8 pt-0 pb-16" style=margin-top:0><article class="mb-2 pb-2 first-of-type:mt-0"><h1 class="!mt-0 !mb-1 !text-base !font-bold"><a href=/perfetto-oss-company-prio/ class="!text-black dark:!text-white !no-underline hover:!underline">On Perfetto, Open Source, and Company Priorities</a></h1><time class="block text-xs" style=margin-bottom:.5rem;opacity:.4>Oct 17, 2025</time><div><p>I recently stumbled across
<a href=https://lobste.rs/s/fl7ly9/traceboot_precise_lightweight_tracing>this post on lobste.rs</a>
about a project called
<a href=https://codeberg.org/SpecialSnowflake/traceboot>traceboot</a> which allows
visualizing the Linux boot process using lightweight ftrace events and Perfetto.
The author had
<a href=https://codeberg.org/SpecialSnowflake/traceboot#woes-with-a-rant-and-ideas-last-paragraph-of-this-section>some commentary</a>
about their experience trying to order tracks in Perfetto:</p><blockquote><p>Ordering tracks with perfetto has been ridiculously complicated. It has taken
the majority of the time of this project! Upstream&rsquo;s answers are basically
that the main user is Android (Perfetto is a Google project) so others come
second if at all. While I get the reasons to do so, I read that as a caution
against depending on it as a third-party. Google is notorious for (&mldr;)
completely killing projects</p></blockquote><p>Honestly? All of these points are right:</p><ul><li>It is really unfortunate that doing something so simple took so much effort.</li><li>It&rsquo;s true that external users are supported at a lower priority than Android
users.</li><li>It&rsquo;s also the case that Google has historically wound down projects when
priorities shift</li></ul><p>The good news is that we just
<a href=https://github.com/google/perfetto/pull/3273>landed</a> support for trace
writers to specify explicitly how traces should be ordered with the JSON format
in Perfetto without any extreme workarounds! This feature is already available on
the &ldquo;Canary&rdquo; UI channel and on &ldquo;Stable&rdquo; within 3-4 weeks.</p><p><img src=/img/perfetto-json-ordering.png alt="Json Track ordering in action!"></p><p style=text-align:center><i>process_sort_index and thread_sort_index are now respected by Perfetto!</i></p><p>So we solved the imediate problem! But here&rsquo;s what concerns me: I found this
issue totally by chance while browsing lobste.rs. There were several issues
filed in the Perfetto repo over several years asking for this feature
(<a href=https://github.com/google/perfetto/issues/555>#555</a>,
<a href=https://github.com/google/perfetto/issues/764>#764</a>,
<a href=https://github.com/google/perfetto/issues/378>#378</a>) but none of them managed
to communicate to us just how painful this issue was and the lengths people were
willing to go to work around it. Seeing the annoyance in such stark terms
definitely put into perspective the importance of this feature.</p><p>You might be thinking: &ldquo;surely if a feature is requested that much, you should
consider it important and work on fixing it&rdquo;. And for a general open source
project, I&rsquo;d agree with you. But there are some unique challenges which come
with being an open source project under the umbrella of a Big Tech company.</p><p>It&rsquo;s all about how the Perfetto team fits into Google. We&rsquo;re part of the Android
Diagnostics organization whose mandate is to build tools and systems to
root-cause problems on Android. Performance debugging would be impossible
without a system-wide tracing tool like Perfetto (which is why we even exist at
all!). But because we are funded by Android, it&rsquo;s also expected that we
prioritise its needs.</p><p>However, I, and others in the team, also deeply believe in the mission of open
source. We want to build something useful not just for Android engineers inside
Google but for the broader community as a whole. That creates a tension we
struggle with constantly: we value external users and their use cases, but the
reality of our team&rsquo;s existence means Google&rsquo;s priorities often win out.</p><p>This tension is compounded by the fact that different types of users want
fundamentally different things from Perfetto. If you use Perfetto purely as a
trace viewer, the expectation is &ldquo;I write the trace file and the Perfetto UI
should display exactly what I want&rdquo;. But Android OS and app developers expect
&ldquo;Perfetto should intelligently figure out what is most important in my trace and
highlight that to me.&rdquo;</p><p>In the early days of Perfetto, we took on a lot of technical debt to meet the
immediate needs of Android developers. We built an &lsquo;intelligence&rsquo; layer that
automatically reordered tracks based on Android-specific heuristics. This was
great for our primary users, but it made it immensely difficult to later support
features for the &lsquo;pure trace viewer&rsquo; use case, like manually ordering tracks via
the JSON file, because the Android logic would always override it.</p><p>The good news is that over the past 12 months, we&rsquo;ve spent a lot of time trying
to decouple the &ldquo;core&rdquo; layer of Perfetto UI from the &ldquo;intelligence&rdquo; layer for
Android. This separation means we can now preserve the original intent from the
trace format (like &ldquo;this track should be ordered here&rdquo;) all the way to the UI,
rather than having it get lost or overridden by Android-specific heuristics
along the way. This allows us to build features like JSON track ordering without
creating impossible-to-maintain code that hurts us in the long run.</p><p>It’s also understandable that people worry about Google’s project longevity.
Thankfully Perfetto&rsquo;s core design principles of a) being 100% open source b)
fully client side significantly mitigate these risks. For example, running the
Perfetto UI is as simple as cloning the repo, running
<code>tools/install-build-deps --ui && ui/run-dev-server</code> and navigating to
<code>localhost:10000</code>. The site is entirely static capable of being hosted anywhere.
There is no &ldquo;backend server&rdquo; to be taken down, everything runs in your browser
only. So if for some reason, if the Perfetto team was to disappear, it would be
trivially easy to host it yourself or even fork the project completely and start
maintaing it.</p><p>With all that said, here are my takeaways from this experience:</p><ol><li>There are still painpoints lurking in issues from the past that external
users are still hitting today. We should maybe do a pass over historical bugs
and figure out what issues are hiding there.</li><li>Moving forward, we need to be more transparent and communicative about <em>why</em>
we&rsquo;re not prioritising a certain issue. I feel our terse replies about our
priorities are giving misleading indications on the value we place on
external users. Maybe we should also be more open about what we <em>are</em>
prioritizing, even if that means we have to say &ldquo;we&rsquo;re not going to be able
to do much for external users this quarter&rdquo;.</li><li>We also need to set up a regular routine for going through our bug tracker
and checking &ldquo;has anything changed which now makes this bug possible&rdquo; and if
so, we should follow up and post on the issue to make everyone aware of this
and keep bugs up to date.</li></ol><p>Here&rsquo;s also where community help would be invaluable: if you&rsquo;re facing an issue
with Perfetto, tell us on <a href=https://github.com/google/perfetto>Github</a> or on our
<a href=https://groups.google.com/g/perfetto-dev>mailing list</a>! Comment on old bugs if
one already exists or file new ones if they don&rsquo;t. Bonus points if you can tell
us why the issue is so painful for you and what you&rsquo;re doing to work around it
if it&rsquo;s not fixed. The more information we have, the better judgement calls we
can make on prioritization.</p></div></article><hr style="border:0;border-top:1px solid rgba(128,128,128,.3);margin-top:.25rem;margin-bottom:.25rem"><article class="mb-2 pb-2 first-of-type:mt-0"><h1 class="!mt-0 !mb-1 !text-base !font-bold"><a href=/writing-tools-for-claude-code/ class="!text-black dark:!text-white !no-underline hover:!underline">What Makes a Good Tool for Claude Code</a></h1><time class="block text-xs" style=margin-bottom:.5rem;opacity:.4>Oct 12, 2025</time><div><p>I&rsquo;ve been using Claude Code extensively for personal projects, and similar AI
coding tools at work. Recently I came across
<a href=https://www.alephic.com/writing/the-magic-of-claude-code>this excellent blog post</a>
that resonated with a lot of my experience.</p><p>One part stuck with me though: Noah emphasizes that tools fail with LLMs when
they&rsquo;re &ldquo;overly complex,&rdquo; with the Unix philosophy being particularly
well-suited for tool calling. But then I thought about <code>git</code>.</p><p>Git breaks the Unix philosophy completely. It&rsquo;s sprawling, stateful, and
complex. And yet Claude Code handles it effortlessly. It composes commands that,
even after 10+ years of daily git usage, I wouldn&rsquo;t think to use. It handles
rebasing, cherry-picking, complex resets—stuff that trips up experienced
developers regularly.</p><div style=margin-top:1rem;margin-bottom:1rem><a href=/writing-tools-for-claude-code/ class="text-sm opacity-60 hover:opacity-100 hover:underline">Continue reading →</a></div></div></article><hr style="border:0;border-top:1px solid rgba(128,128,128,.3);margin-top:.25rem;margin-bottom:.25rem"><article class="mb-2 pb-2 first-of-type:mt-0"><h1 class="!mt-0 !mb-1 !text-base !font-bold"><a href=/llm-motivation-via-emotions/ class="!text-black dark:!text-white !no-underline hover:!underline">Harnessing Frustration: Using LLMs to Overcome Activation Energy</a></h1><time class="block text-xs" style=margin-bottom:.5rem;opacity:.4>Jul 14, 2025</time><div><p>One of my biggest weaknesses as a software engineer is procrastination when
facing a new project. When the scope is unclear, I have a tendency to wait until
I feel I&rsquo;ve &ldquo;felt out&rdquo; the problem to start doing anything. I know I&rsquo;ll feel
better and work much faster when I get &ldquo;stuck in&rdquo; but I still struggle with that
first step, overcoming the &ldquo;activation energy&rdquo; required to engage with the
details.</p><div style=margin-top:1rem;margin-bottom:1rem><a href=/llm-motivation-via-emotions/ class="text-sm opacity-60 hover:opacity-100 hover:underline">Continue reading →</a></div></div></article><hr style="border:0;border-top:1px solid rgba(128,128,128,.3);margin-top:.25rem;margin-bottom:.25rem"><article class="mb-2 pb-2 first-of-type:mt-0"><h1 class="!mt-0 !mb-1 !text-base !font-bold"><a href=/hw-encoding-raspi/ class="!text-black dark:!text-white !no-underline hover:!underline">V4L2 and Hardware Encoding on the Raspberry Pi</a></h1><time class="block text-xs" style=margin-bottom:.5rem;opacity:.4>Feb 1, 2021</time><div><p><strong>TLDR</strong>: Explain how the V4L2 M2M API works through the use-case of
implementing hardware video encoding on the Raspberry Pi. This knowledge is
generally useful as V4L2 is the de-facto generic API for hardware decoding and
encoding on Linux.</p><p><strong>Background</strong></p><p>My journey started at
<a href="https://www.youtube.com/watch?v=CyEpshm16HY&amp;t=139s">this video</a> on the
excellent
<a href=https://www.youtube.com/channel/UCp3yVOm6A55nx65STpm3tXQ>Craft Computing</a>
YouTube channel which showed how to setup TinyPilot, a Python app for KVM over
IP which runs on a Raspberry Pi. Behind the scenes, TinyPilot uses
<a href=https://github.com/pikvm/ustreamer>ustreamer</a> to read frames from a HDMI
capture card and either exposes it over HTTP or writes it to shared memory.
Along with the MJPEG output, support was recently added for encoding video using
H264.</p><div style=margin-top:1rem;margin-bottom:1rem><a href=/hw-encoding-raspi/ class="text-sm opacity-60 hover:opacity-100 hover:underline">Continue reading →</a></div></div></article><hr style="border:0;border-top:1px solid rgba(128,128,128,.3);margin-top:.25rem;margin-bottom:.25rem"></main><footer class="mx-auto flex h-[4.5rem] max-w-(--w) items-center px-8 text-xs tracking-wider uppercase opacity-60"><div class=mr-auto>&copy;2025
<a class=link href=/>Lalit Maganti</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>powered by hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>hugo-paper</a></footer></body></html>